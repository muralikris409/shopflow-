"use strict";exports.id=575,exports.ids=[575],exports.modules={83396:function(e,r,t){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.destroyCookie=r.setCookie=r.parseCookies=void 0;var s=t(44609),i=t(45491),n=t(90485);function a(e,r){var t,o;return(null===(o=null===(t=null==e?void 0:e.req)||void 0===t?void 0:t.headers)||void 0===o?void 0:o.cookie)?s.parse(e.req.headers.cookie,r):n.isBrowser()?s.parse(document.cookie,r):{}}function u(e,r,t,a){var u,c;if(void 0===a&&(a={}),(null===(u=null==e?void 0:e.res)||void 0===u?void 0:u.getHeader)&&e.res.setHeader){if(null===(c=null==e?void 0:e.res)||void 0===c?void 0:c.finished)return console.warn('Not setting "'+r+'" cookie. Response has finished.'),console.warn("You should set cookie before res.send()"),{};var l=e.res.getHeader("Set-Cookie")||[];"string"==typeof l&&(l=[l]),"number"==typeof l&&(l=[]);var d=i.parse(l,{decodeValues:!1}),p=n.createCookie(r,t,a),f=[];d.forEach(function(e){if(!n.areCookiesEqual(e,p)){var r=s.serialize(e.name,e.value,o({encode:function(e){return e}},e));f.push(r)}}),f.push(s.serialize(r,t,a)),e.res.setHeader("Set-Cookie",f)}if(n.isBrowser()){if(a&&a.httpOnly)throw Error("Can not set a httpOnly cookie in the browser.");document.cookie=s.serialize(r,t,a)}return{}}function c(e,r,t){return u(e,r,"",o(o({},t||{}),{maxAge:-1}))}r.parseCookies=a,r.setCookie=u,r.destroyCookie=c,r.default={set:u,get:a,destroy:c}},90485:function(e,r){var t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)};function o(e,r){var t=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(r);if(t.length!==o.length)return!1;for(var s=0;s<t.length;s++){var i=t[s];if(e[i]!==r[i])return!1}return!0}Object.defineProperty(r,"__esModule",{value:!0}),r.areCookiesEqual=r.hasSameProperties=r.createCookie=r.isBrowser=void 0,r.isBrowser=function(){return"undefined"!=typeof window},r.createCookie=function(e,r,o){var s=o.sameSite;!0===s&&(s="strict"),(void 0===s||!1===s)&&(s="lax");var i=t(t({},o),{sameSite:s});return delete i.encode,t({name:e,value:r},i)},r.hasSameProperties=o,r.areCookiesEqual=function(e,r){var s=e.sameSite===r.sameSite;return"string"==typeof e.sameSite&&"string"==typeof r.sameSite&&(s=e.sameSite.toLowerCase()===r.sameSite.toLowerCase()),o(t(t({},e),{sameSite:void 0}),t(t({},r),{sameSite:void 0}))&&s}},44609:(e,r)=>{r.parse=function(e,r){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var o={},s=e.split(";"),i=(r||{}).decode||t,n=0;n<s.length;n++){var a=s[n],u=a.indexOf("=");if(!(u<0)){var c=a.substring(0,u).trim();if(void 0==o[c]){var l=a.substring(u+1,a.length).trim();'"'===l[0]&&(l=l.slice(1,-1)),o[c]=function(e,r){try{return r(e)}catch(r){return e}}(l,i)}}}return o},r.serialize=function(e,r,t){var i=t||{},n=i.encode||o;if("function"!=typeof n)throw TypeError("option encode is invalid");if(!s.test(e))throw TypeError("argument name is invalid");var a=n(r);if(a&&!s.test(a))throw TypeError("argument val is invalid");var u=e+"="+a;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(i.domain){if(!s.test(i.domain))throw TypeError("option domain is invalid");u+="; Domain="+i.domain}if(i.path){if(!s.test(i.path))throw TypeError("option path is invalid");u+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");u+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var t=decodeURIComponent,o=encodeURIComponent,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},45491:e=>{var r={decodeValues:!0,map:!1,silent:!1};function t(e){return"string"==typeof e&&!!e.trim()}function o(e,o){var s,i,n,a,u=e.split(";").filter(t),c=(s=u.shift(),i="",n="",(a=s.split("=")).length>1?(i=a.shift(),n=a.join("=")):n=s,{name:i,value:n}),l=c.name,d=c.value;o=o?Object.assign({},r,o):r;try{d=o.decodeValues?decodeURIComponent(d):d}catch(e){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+d+"'. Set options.decodeValues to false to disable this feature.",e)}var p={name:l,value:d};return u.forEach(function(e){var r=e.split("="),t=r.shift().trimLeft().toLowerCase(),o=r.join("=");"expires"===t?p.expires=new Date(o):"max-age"===t?p.maxAge=parseInt(o,10):"secure"===t?p.secure=!0:"httponly"===t?p.httpOnly=!0:"samesite"===t?p.sameSite=o:"partitioned"===t?p.partitioned=!0:p[t]=o}),p}function s(e,s){if(s=s?Object.assign({},r,s):r,!e)return s.map?{}:[];if(e.headers){if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var i=e.headers[Object.keys(e.headers).find(function(e){return"set-cookie"===e.toLowerCase()})];i||!e.headers.cookie||s.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=i}}return(Array.isArray(e)||(e=[e]),s.map)?e.filter(t).reduce(function(e,r){var t=o(r,s);return e[t.name]=t,e},{}):e.filter(t).map(function(e){return o(e,s)})}e.exports=s,e.exports.parse=s,e.exports.parseString=o,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var r,t,o,s,i,n=[],a=0;function u(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(r=a,i=!1;u();)if(","===(t=e.charAt(a))){for(o=a,a+=1,u(),s=a;a<e.length&&"="!==(t=e.charAt(a))&&";"!==t&&","!==t;)a+=1;a<e.length&&"="===e.charAt(a)?(i=!0,a=s,n.push(e.substring(r,o)),r=a):a=o+1}else a+=1;(!i||a>=e.length)&&n.push(e.substring(r,e.length))}return n}},65575:(e,r,t)=>{t.d(r,{Ad:()=>l,BD:()=>u,E1:()=>d,Hh:()=>a,d6:()=>n,iD:()=>i,xw:()=>c});var o=t(85209),s=t(83396);async function i(e,r=null){let{email:t,password:n}=e;try{let e=await o.S.post("user/login",{email:t,password:n});console.log(e.data);let{token:i,data:a}=e.data;return console.log(i,a),(0,s.setCookie)(r,"shopflow_session",JSON.stringify({user:a,token:i}),{maxAge:2592e3,path:"/",sameSite:"lax"}),{data:a,token:i}}catch(e){throw console.log(e),Error(e.response.data.message||"An error occurred during login.")}}async function n(e,r=null){try{let t=await o.S.post("user/oauth",{...e});console.log("google auth b-end res after gauth",t);let{token:i,data:n}=t.data;return(0,s.setCookie)(r,"shopflow_session",JSON.stringify({user:n,token:i}),{maxAge:2592e3,path:"/",sameSite:"lax"}),t.data}catch(e){throw Error(e?.data?.response?.message||"An error occurred during Google OAuth.")}}async function a(e){let{username:r,email:t,password:s}=e;try{return(await o.S.post("user/signup",{name:r,email:t,password:s},{headers:{"Content-Type":"application/json"}})).data}catch(e){throw Error(e.response.data.message||"An error occurred during sign-up.")}}async function u(e){try{let r=await o.S.post(`user/forgotPassword?email=${e}`);if(console.log(r),200===r.status)return{ok:!0,data:r.data};return{ok:!1,message:r.data?.message||"Something went wrong."}}catch(e){throw console.log(e),e}}async function c(e,r){try{return await o.S.post(`user/resetPassword?token=${e}&newPassword=${r}`)}catch(e){console.log(e)}}async function l(e,r){try{console.log("token",e);let t=await o.S.get(`user/getAllAddress?userId=${r}`,{headers:{Authorization:`Bearer ${e}`}});return console.log(t),t.data}catch(e){return console.error("Error fetching addresses:",e),{error:e.message||"Something went wrong!"}}}let d=async(e,r,t)=>{try{let{street:s,city:i,state:n,country:a,zip:u,isPrimary:c}=t;return(await o.S.post("user/addAddress",{},{params:{userId:r,street:s,city:i,state:n,country:a,zip:u,isPrimary:c},headers:{Authorization:`Bearer ${e}`}})).data}catch(e){return console.error("Error adding address:",e),{error:e.response?.data?.message||"Something went wrong!"}}}}};