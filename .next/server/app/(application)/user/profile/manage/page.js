(()=>{var e={};e.id=654,e.ids=[654],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},45328:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>u,tree:()=>p});var s=r(70260),a=r(28203),o=r(25155),n=r.n(o),i=r(67292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let p=["",{children:["(application)",{children:["user",{children:["profile",{children:["manage",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,20889)),"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/(application)/user/profile/manage/page.js"]}]},{}]},{}]},{}]},{forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,38934)),"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/layout.js"],loading:[()=>Promise.resolve().then(r.bind(r,18988)),"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/loading.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,26420)),"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/not-found.js"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/(application)/user/profile/manage/page.js"],c={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(application)/user/profile/manage/page",pathname:"/user/profile/manage",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}})},99361:(e,t,r)=>{Promise.resolve().then(r.bind(r,20889))},35809:(e,t,r)=>{Promise.resolve().then(r.bind(r,97429))},97429:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(45512),a=r(58009),o=r(65575),n=r(92273),i=r(54652),l=r(11766);let p=()=>{let e=(0,n.wA)(),t=(0,n.d4)(e=>e?.userData),r=t?.user,p=t?.token,d=r?.id,[c,u]=(0,a.useState)({name:r?.name||"",phone:r?.phone||""}),[m,h]=(0,a.useState)(r?.profile_pic||null),[f,x]=(0,a.useState)(!1),[g,b]=(0,a.useState)({});(0,a.useEffect)(()=>{r&&(h(r.profile_pic||null),u({name:r.name||"",phone:r.phone||""}))},[t]);let v=()=>{let e={};return c.name.trim()||(e.name="Name is required."),/^\d{10}$/.test(c.phone)||(e.phone="Phone number must be 10 digits."),b(e),0===Object.keys(e).length},y=e=>{let{name:t,value:r}=e.target;u(e=>({...e,[t]:r}))},w=async t=>{if(t.preventDefault(),!v())return;x(!0);let r=new FormData;r.append("name",c.name),r.append("phone",c.phone);let s=t.target.profileImage.files[0];s&&r.append("profile",s);try{let t=await (0,o.RW)(p,d,r);200===t.status&&((0,l.oR)({title:"Success",description:"Profile updated successfully!"}),e((0,i.Fd)(`/user/userProfileInfo?userId=${d}`,p)))}catch(e){(0,l.oR)({title:"Error",description:e.response?.data?.message||"An error occurred.",variant:"destructive"})}finally{x(!1)}};return(0,s.jsxs)("div",{className:"w-full h-screen mx-auto p-2 md:p-4 bg-white rounded-lg shadow-md",children:[(0,s.jsx)("h2",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Edit Profile"}),(0,s.jsxs)("form",{onSubmit:w,encType:"multipart/form-data",children:[(0,s.jsx)("div",{className:"flex flex-col items-center mb-6 relative",children:(0,s.jsxs)("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center relative group",children:[m?(0,s.jsx)("img",{src:m,alt:"Profile",className:"w-full h-full object-cover"}):(0,s.jsx)("span",{className:"text-3xl font-bold text-gray-500",children:r?.name?.charAt(0)}),(0,s.jsxs)("label",{className:"absolute inset-0 bg-white/10 backdrop-blur-md flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-pointer rounded-full",children:[(0,s.jsx)("span",{className:"text-white px-3 py-1 rounded-md text-sm shadow-md",children:"Edit âœŽ"}),(0,s.jsx)("input",{type:"file",name:"profileImage",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t&&t.type.startsWith("image/")){let e=new FileReader;e.onloadend=()=>h(e.result),e.readAsDataURL(t)}else(0,l.oR)({title:"Invalid file type",description:"Please upload an image.",variant:"destructive"})},className:"hidden"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",onChange:y,value:c.name,className:"mt-1 p-2 w-full border border-gray-300 rounded-md",required:!0}),g.name&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:g.name})]}),(0,s.jsx)("div",{className:"mb-4 relative",children:(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:r?.email,className:"mt-1 p-2 w-full border border-gray-300 rounded-md bg-gray-100",disabled:!0,placeholder:"Email"}),(0,s.jsx)("span",{className:"absolute right-2 top-2 text-gray-500 text-xs hidden group-hover:block bg-gray-200 px-2 py-1 rounded-md",children:"Email can't be changed"})]})}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,s.jsx)("input",{type:"text",id:"phone",name:"phone",onChange:y,value:c.phone,className:"mt-1 p-2 w-full border border-gray-300 rounded-md",required:!0}),g.phone&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:g.phone})]})]}),(0,s.jsx)("div",{className:"text-center mt-6",children:(0,s.jsx)("button",{type:"submit",className:"bg-orange-500 text-white px-6 py-2 rounded-md hover:bg-orange-600 transition-colors",disabled:f,children:f?"Saving...":"Save Changes"})})]})]})}},20889:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/(application)/user/profile/manage/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/(application)/user/profile/manage/page.js","default")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,214,646,575],()=>r(45328));module.exports=s})();