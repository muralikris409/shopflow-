(()=>{var e={};e.id=295,e.ids=[295],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},54152:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var s=t(70260),a=t(28203),o=t(25155),i=t.n(o),n=t(67292),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(r,c);let l=["",{children:["(application)",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,25070)),"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/(application)/cart/page.js"]}]},{}]},{forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,38934)),"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/layout.js"],loading:[()=>Promise.resolve().then(t.bind(t,18988)),"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/loading.js"],"not-found":[()=>Promise.resolve().then(t.bind(t,26420)),"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/not-found.js"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/(application)/cart/page.js"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(application)/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},75296:(e,r,t)=>{Promise.resolve().then(t.bind(t,25070))},38848:(e,r,t)=>{Promise.resolve().then(t.bind(t,64350))},64350:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var s=t(45512),a=t(58009),o=t(6932),i=t(65765),n=t(92273),c=t(79334),l=t(8766),d=t(65357),u=t(96519),p=t(25998),h=t(61038),m=t(69576),f=t(36684),g=t(30830),x="horizontal",y=["horizontal","vertical"],w=a.forwardRef((e,r)=>{let{decorative:t,orientation:a=x,...o}=e,i=y.includes(a)?a:x;return(0,s.jsx)(g.sG.div,{"data-orientation":i,...t?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"},...o,ref:r})});w.displayName="Separator";var v=t(86645);let j=a.forwardRef(({className:e,orientation:r="horizontal",decorative:t=!0,...a},o)=>(0,s.jsx)(w,{ref:o,decorative:t,orientation:r,className:(0,v.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",e),...a}));j.displayName=w.displayName;let C=(0,t(94825).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var N=t(11766);let b=()=>{let e=(0,n.wA)(),r=new i.A,t=(0,n.d4)(e=>e.userData?.user),f=p.A.get("shopflow_session")?JSON.parse(p.A.get("shopflow_session")):null,g=(0,c.useRouter)(),x=(0,n.d4)(e=>e?.cart?.items)||[],y=(0,n.d4)(e=>e?.cart?.totalAmount)||0,w=(0,n.d4)(e=>e.cart.error),[v,C]=(0,a.useState)(!1),{toast:b}=(0,N.dj)();(0,a.useEffect)(()=>{(async()=>{t&&e((0,u.Fd)(`/user/cart/viewCart?userId=${f?.user?.id}`,f?.token))})()},[t,e]);let E=e=>{g.push(`/product/${e}`)},q=async()=>{C(!0);try{let e=x.map(e=>({productId:e.productId,quantity:e.quantity})),{order:r}=await (0,l.fS)(t.id,e);g.push(`/checkout/${r.id}`)}catch(e){b({title:"Error",description:"Failed to create order. Please try again.",variant:"destructive"})}finally{C(!1)}},P=async s=>{try{t?await r.updateCartCount(t.id,s,"increase"):(0,o.o7)(s),e((0,u.Fd)(t?`/user/cart/viewCart?userId=${f?.user?.id}`:(0,o.Xl)(),f?.token))}catch(e){b({title:"Error",description:"Failed to update item quantity.",variant:"destructive"})}},S=async s=>{try{t?await r.updateCartCount(t.id,s,"decrease"):(0,o.CG)(s),e((0,u.Fd)(t?`/user/cart/viewCart?userId=${f?.user?.id}`:(0,o.Xl)(),f?.token))}catch(e){b({title:"Error",description:"Failed to update item quantity.",variant:"destructive"})}},I=async s=>{try{t?await r.deleteFromCart(t.id,s):(0,o.qY)(s),e((0,u.Fd)(t?`/user/cart/viewCart?userId=${f?.user?.id}`:(0,o.Xl)(),f?.token))}catch(e){b({title:"Error",description:"Failed to remove product from cart.",variant:"destructive"})}};return(0,s.jsx)("div",{className:"w-full h-screen mx-auto p-2 md:p-4 bg-white rounded-lg shadow-md",children:(0,s.jsxs)("div",{className:"container mx-auto px-1",children:[(0,s.jsx)("h2",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Shopping Cart"}),w?(0,s.jsx)("p",{className:"text-center text-red-500",children:w.message}):0===x.length?(0,s.jsx)("p",{className:"text-center text-gray-600",children:"Your cart is empty"}):(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(m.Zp,{children:(0,s.jsx)(m.Wu,{className:"p-4",children:(0,s.jsx)("ul",{className:"space-y-4",children:x.map((e,r)=>(0,s.jsx)(k,{handleNavigation:E,product:t?e.product:e,onIncreaseQuantity:P,onDecreaseQuantity:S,onRemoveProduct:I,quantity:e?.quantity},r))})})})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)(m.Zp,{className:"sticky top-16",children:[(0,s.jsx)(m.aR,{children:(0,s.jsx)(m.ZB,{className:"text-lg",children:"Price Details"})}),(0,s.jsxs)(m.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("p",{children:"Price"}),(0,s.jsxs)("p",{children:["$",y.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("p",{children:"Discount"}),(0,s.jsx)("p",{children:"- $0.00"})]}),(0,s.jsx)(j,{}),(0,s.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,s.jsx)("p",{children:"Total Amount"}),(0,s.jsxs)("p",{children:["$",y.toFixed(2)]})]}),(0,s.jsx)(h.$,{onClick:t?q:()=>{e((0,d.Dh)({route:"/cart"})),g.push("/auth")},className:"w-full",disabled:0===x.length||v,children:v?"Processing...":"Checkout"})]})]})})]})]})})};function k({handleNavigation:e,product:r,onIncreaseQuantity:t,onDecreaseQuantity:o,onRemoveProduct:i,quantity:n}){let[c,l]=(0,a.useState)(!1),{toast:d}=(0,N.dj)(),u=async(e,r)=>{l(!0);try{await e(r)}catch(e){d({title:"Error",description:"Operation failed. Please try again.",variant:"destructive"})}finally{l(!1)}};return(0,s.jsx)("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden ${c?"animate-pulse":""}`,children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row p-4 gap-4",children:[(0,s.jsx)("img",{className:"w-full md:w-24 h-24 rounded-lg object-cover",src:r?.image,alt:r?.name}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{onClick:()=>e(r?.id),className:"text-lg font-semibold text-gray-900 hover:underline cursor-pointer",children:r?.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["$",r?.offerPrice?.toFixed(2)," ",(0,s.jsxs)("span",{className:"line-through text-gray-400",children:["$",r?.actualPrice?.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,s.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>u(o,r?.id),disabled:c||1==n,children:"-"}),(0,s.jsx)(f.p,{className:"w-12 text-center",type:"text",value:n,readOnly:!0}),(0,s.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>u(t,r?.id),disabled:c,children:"+"})]})]}),(0,s.jsx)(h.$,{size:"sm",onClick:()=>u(i,r?.id),disabled:c,className:"self-start md:self-center bg-red-500",children:(0,s.jsx)(C,{className:"w-4 h-4 text-white"})})]})})}},6932:(e,r,t)=>{"use strict";t.d(r,{CG:()=>l,Xl:()=>d,o7:()=>c,qY:()=>n});let s="shopflow";function a(){let e=localStorage.getItem(s);return e?JSON.parse(e):[]}function o(e){localStorage.setItem(s,JSON.stringify(e))}function i(e,r){return e.findIndex(e=>e.id===r)}function n(e){let r=a();o(r=r.filter(r=>r.id!==e))}function c(e){let r=a(),t=i(r,e);-1!==t&&(r[t].quantity+=1,o(r))}function l(e){let r=a(),t=i(r,e);-1!==t&&(r[t].quantity>1?r[t].quantity-=1:n(e),o(r))}function d(){return a()}},8766:(e,r,t)=>{"use strict";t.d(r,{N4:()=>l,TU:()=>n,fS:()=>a,gY:()=>c,kp:()=>o,p:()=>d,yT:()=>i});var s=t(85209);let a=async(e,r)=>{try{let t=await s.S.post("/user/order/createOrder",{userId:e,items:r});return console.log(t),t.data}catch(e){throw console.error("Error creating order:",e),Error(e?.response?.data?.message||"Error creating order.")}},o=async e=>{try{return(await s.S.get(`/user/order/getOrderForCheckout/?orderId=${e}`)).data}catch(e){return console.error("Error fetching order for checkout:",e),{status:"error",message:e.response?.data?.message||"An error occurred while fetching the order."}}},i=async(e,r,t,a)=>{console.log("order_id:",e),console.log("razorpayId:",r),console.log("paymentId:",t),console.log("siign:",a);try{return(await s.S.post("/user/order/verify",{},{params:{orderId:e,razorpayId:r,paymentId:t,paymentSignature:a}})).data}catch(e){throw console.error("Error verifying payment:",e),Error(e?.response?.data?.message||"Error verifying payment.")}},n=async e=>{console.log("orderid:",e);try{return(await s.S.post(`/user/order/checkoutOrder?orderId=${e}`)).data}catch(e){throw console.error("Error fetching user orders:",e),Error(e?.response?.data?.message||"Error fetching user orders.")}},c=async()=>{try{return(await s.S.get("/user/order/getUserOrder")).data}catch(e){throw console.error("Error fetching user orders:",e),Error(e?.response?.data?.message||"Error fetching user orders.")}},l=async e=>{console.log(e);try{return(await s.S.put(`/user/order/cancelOrder?orderId=${e}`)).data}catch(e){throw console.error("Error cancelling order:",e),Error(e?.response?.data?.message||"Error cancelling order.")}},d=async e=>{console.log("userId:",e);try{let r=await s.S.get(`/user/order/getOrderById?orderId=${e}`);return console.log(r.data),r.data}catch(e){throw console.error("Error fetching user orders:",e),Error(e?.response?.data?.message||"Error fetching user orders.")}}},65765:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(92273),a=t(85209);let o=function(){let e=(0,s.d4)(e=>e.userData.token),r="shopflow",t=()=>({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});this.loadCart=function(){let e=localStorage.getItem(r);return e?JSON.parse(e):[]},this.saveCart=function(e){localStorage.setItem(r,JSON.stringify(e))},this.migrateCart=async function(e){let r=this.loadCart();if(console.log(r,e),r.length>0){for(let t of r)try{console.log(t);let r=await this.addItemToCart(e,t.id,t.quantity);console.log("migrated",r)}catch(e){console.error("Error migrating cart item:",e)}this.clearCart()}},this.addItemToCart=async function(e,r,s=1){console.log(e),console.log(r);try{return(await a.S.post("/user/cart/addItemToCart",{},{params:{userId:e,productId:r,quantity:s},headers:t()})).data}catch(e){throw console.log(e),console.error("Error adding item to cart:",e),e.response?e.response.data:Error("Network or server error")}},this.viewCart=async function(e){try{let r=await a.S.get("/user/cart/viewCart",{params:{userId:e},headers:t()});if(200===r.status)return r.data.data||[];throw Error(r.data.message||"Failed to retrieve cart")}catch(e){throw console.error("Error viewing cart:",e),e.response?e.response.data:Error("Network or server error")}},this.deleteFromCart=async function(e,r){try{let s=await a.S.delete("/user/cart/deleteFromCart",{params:{userId:e,productId:r},headers:t()});if(200===s.status)return s.data;throw Error(s.data.message||"Failed to delete item from cart")}catch(e){throw console.error("Error deleting item from cart:",e),e.response?e.response.data:Error("Network or server error")}},this.updateCartCount=async function(e,r,s){try{let o=await a.S.put("/user/cart/cartCount",{},{params:{userId:e,productId:r,operation:s},headers:t()});if(console.log(o.status),200===o.status)return o.data;throw Error(o.data||"Failed to update cart count")}catch(e){throw console.error("Error updating cart count:",e),e}},this.clearCart=function(){localStorage.removeItem(r)}}},69576:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>l,ZB:()=>c,Zp:()=>i,aR:()=>n});var s=t(45512),a=t(58009),o=t(86645);let i=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let n=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...r}));n.displayName="CardHeader";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));c.displayName="CardTitle",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let l=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},25070:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/(application)/cart/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/murali/Documents/Cloning task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/(application)/cart/page.js","default")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,214,646],()=>t(54152));module.exports=s})();