{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/_service/OrderService.js"],"sourcesContent":["import {axiosInstance} from '../api/axios';\n\nexport const createOrder = async ( items) => {\n  try {\n    const response = await axiosInstance.post('/user/order/createOrder', { items });\n    console.log(response)\n    return response.data;\n  } catch (error) {\n    console.error('Error creating order:', error);\n    throw new Error(error?.response?.data?.message || 'Error creating order.');\n  }\n};\nexport const fetchOrderForCheckout = async (orderId) => {\n  try {\n    const response = await axiosInstance.get(`/user/order/getOrderForCheckout/?orderId=${orderId}`); \n    return response.data; \n  } catch (error) {\n    console.error(\"Error fetching order for checkout:\", error);\n    return {\n      status: \"error\",\n      message: error.response?.data?.message || \"An error occurred while fetching the order.\",\n    };\n  }\n};\nexport const verifyPaymentAndUpdateOrder = async (orderId,razorpayId, paymentId, paymentSignature) => {\n    console.log(\"order_id:\",orderId);\n    console.log(\"razorpayId:\",razorpayId);\n    console.log(\"paymentId:\",paymentId);\n    console.log(\"siign:\",paymentSignature);\n  try {\n    const response = await axiosInstance.post('/user/order/verify', {}\n    ,\n    {\n        params:{\n            orderId,\n            razorpayId,\n            paymentId,\n            paymentSignature,\n        }\n    }\n    \n);\n    return response.data;\n  } catch (error) {\n    console.error('Error verifying payment:', error);\n    throw new Error(error?.response?.data?.message || 'Error verifying payment.');\n  }\n};\n\nexport const checkOutOrder = async (orderId) => {\n    console.log(\"orderid:\",orderId)\n  try { \n    const response = await axiosInstance.post(`/user/order/checkoutOrder?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n  }\n};\nexport const getOrderByUserId = async () => {\n   \n    try {\n      const response = await axiosInstance.get(`/user/order/getUserOrder`\n       \n      );\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching user orders:', error);\n      throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n    }\n  };\nexport const cancelOrder = async (orderId) => {\n    console.log(orderId);\n  try {\n    const response = await axiosInstance.put(`/user/order/cancelOrder?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error cancelling order:', error);\n    throw new Error(error?.response?.data?.message || 'Error cancelling order.');\n  }\n};\nexport const getOrderById = async (orderId) => {\n  console.log(\"userId:\", orderId);\n  try {\n    const response = await axiosInstance.get(`/user/order/getOrderById?orderId=${orderId}`\n     \n    );\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n  }\n};"],"names":[],"mappings":";;;;;;;;;AAAA;;AAEO,MAAM,cAAc,OAAQ;IACjC,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,2BAA2B;YAAE;QAAM;QAC7E,QAAQ,GAAG,CAAC;QACZ,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACO,MAAM,wBAAwB,OAAO;IAC1C,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,yCAAyC,EAAE,SAAS;QAC9F,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO;YACL,QAAQ;YACR,SAAS,MAAM,QAAQ,EAAE,MAAM,WAAW;QAC5C;IACF;AACF;AACO,MAAM,8BAA8B,OAAO,SAAQ,YAAY,WAAW;IAC7E,QAAQ,GAAG,CAAC,aAAY;IACxB,QAAQ,GAAG,CAAC,eAAc;IAC1B,QAAQ,GAAG,CAAC,cAAa;IACzB,QAAQ,GAAG,CAAC,UAAS;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAEjE;YACI,QAAO;gBACH;gBACA;gBACA;gBACA;YACJ;QACJ;QAGA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AAEO,MAAM,gBAAgB,OAAO;IAChC,QAAQ,GAAG,CAAC,YAAW;IACzB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,CAAC,kCAAkC,EAAE,SAAS;QACxF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACO,MAAM,mBAAmB;IAE5B,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,wBAAwB,CAAC;QAGnE,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACK,MAAM,cAAc,OAAO;IAC9B,QAAQ,GAAG,CAAC;IACd,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,SAAS;QACrF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACO,MAAM,eAAe,OAAO;IACjC,QAAQ,GAAG,CAAC,WAAW;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,iCAAiC,EAAE,SAAS;QAGtF,QAAQ,GAAG,CAAC,SAAS,IAAI;QACzB,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/_components/Loader.js"],"sourcesContent":["import React from \"react\";\n\nexport const Loader = () => {\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-200\">\n      <div className=\"relative  flex items-center justify-center bg-white rounded-full shadow-2xl\">\n        <div className=\"absolute w-full h-full border-4 border-t-transparent border-blue-500 rounded-full animate-spin\"></div>\n        \n        <img\n          src=\"/_assets/loader.gif\"\n          alt=\"Loading...\"\n          className=\"w-24 h-24 drop-shadow-lg\"\n        />\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAAA;;;AAEO,MAAM,SAAS;IACpB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;;;;;8BAEf,6LAAC;oBACC,KAAI;oBACJ,KAAI;oBACJ,WAAU;;;;;;;;;;;;;;;;;AAKpB;KAda"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow-current/shopflow-cpy/shopflowcpy/src/app/%28application%29/orders/page.js"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport { getOrderByUserId, cancelOrder } from \"../../_service/OrderService\";\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { setProductData } from \"../../_lib/utilReducer\";\nimport { useRouter } from \"next/navigation\";\nimport { Loader } from \"@/app/_components/Loader\";\nconst ProductTile = ({ product, onCancel, cancelLoading }) => {\n  const router = useRouter();\n  const dispatch = useDispatch();\n\n  const handleNavigation = () => {\n    router.push(`/product/${product.productId}`);\n  };\n\n  const handleCancel = () => {\n    onCancel(product.orderId);\n  };\n\n  return (\n    <div className=\"product-card p-5 bg-white rounded-lg shadow-lg mb-4 w-full sm:w-96 lg:w-full\">\n      {/* Product Header */}\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3\">\n        <div>\n          <h3 className=\"text-xl font-semibold text-gray-800\">\n            Order ID: <span className=\"text-gray-500\">#{product.orderId}</span>\n          </h3>\n          <p className=\"text-sm text-gray-500\">\n            Placed on: {new Date(product.orderDate).toLocaleDateString()}\n          </p>\n        </div>\n        <p\n          className={`font-semibold ${\n            product.status === \"CONFIRMED\"\n              ? \"text-green-600\"\n              : product.status === \"CANCELLED\"\n              ? \"text-red-600\"\n              : \"text-gray-600\"\n          }`}\n        >\n          {product.status}\n        </p>\n      </div>\n\n      {/* Product Details */}\n      <div\n        onClick={handleNavigation}\n        className=\"flex flex-col sm:flex-row items-start space-y-4 sm:space-x-4 mb-4\"\n      >\n        <img\n          src={product.image || \"/_assets/image.png\"}\n          alt={product.productName}\n          className=\"w-16 h-16 object-cover rounded-md border\"\n        />\n        <div className=\"flex-1\">\n          <p className=\"text-sm font-semibold\">{product.productName}</p>\n          <p className=\"text-sm text-gray-500\">\n            $ {product.offerPrice.toLocaleString()} x {product.quantity}\n          </p>\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center\">\n        <p className=\"font-semibold text-lg\">\n          Total: $ {(product.offerPrice * product.quantity).toLocaleString()}\n        </p>\n        {product.status !== \"CANCELLED\" && (\n          <button\n            className={`mt-3 sm:mt-0 px-4 py-2 text-white text-sm rounded ${\n              cancelLoading === product.orderId\n                ? \"bg-gray-400 cursor-not-allowed\"\n                : \"bg-red-500 hover:bg-red-600\"\n            }`}\n            onClick={handleCancel}\n            disabled={cancelLoading === product.orderId}\n          >\n            {cancelLoading === product.orderId ? \"Cancelling...\" : \"Cancel Order\"}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n  \n\nconst OrderPage = () => {\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [cancelLoading, setCancelLoading] = useState(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  useEffect(() => {\n    const fetchOrders = async () => {\n      try {\n        setLoading(true);\n        const response = await getOrderByUserId();\n        const data = response?.data;\n        console.log(data)\n        const flattenedProducts = data?.flatMap((order) =>\n          order.items.map((item) => ({\n            ...item,\n            orderDate: order.orderDate,\n            totalAmount: order.total,\n          }))\n        );\n\n        setProducts(flattenedProducts || []);\n        setFilteredProducts(flattenedProducts || []);\n      } catch (err) {\n        setError(err?.message || \"An error occurred\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchOrders();\n  }, []);\n\n  const handleCancelOrder = async (orderId) => {\n    try {\n      setCancelLoading(orderId);\n      await cancelOrder(orderId);\n      const updatedProducts = products.map((product) =>\n        product.orderId === orderId\n          ? { ...product, status: \"CANCELLED\" }\n          : product\n      );\n      setProducts(updatedProducts);\n      setFilteredProducts(\n        updatedProducts.filter((product) =>\n          product.productName.toLowerCase().includes(searchQuery)\n        )\n      );\n    } catch (err) {\n      setError(err?.message || \"Failed to cancel order\");\n    } finally {\n      setCancelLoading(null);\n    }\n  };\n\n  const handleSearch = (e) => {\n    const query = e.target.value.toLowerCase();\n    setSearchQuery(query);\n    const filtered = products.filter((product) =>\n      product.productName.toLowerCase().includes(query)\n    );\n    setFilteredProducts(filtered);\n  };\n\n  if (loading) {\n    return <Loader/>;\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-red-500 text-center text-lg\">Error: {error}</div>\n    );\n  }\n\n  return (\n    <div className=\"w-full  h-screen mx-auto p-2 md:p-4 bg-white rounded-lg shadow-md overflow-y-scroll overflow-x-hidden \">\n\n      {/* Search Bar */}\n      <div className=\"mb-6 flex flex-col sm:flex-row justify-between\">\n      <h2 className=\"text-3xl font-semibold text-gray-800 mb-6\">My Orders</h2>\n\n        <input\n          type=\"text\"\n          placeholder=\"Search for products in your orders\"\n          value={searchQuery}\n          onChange={handleSearch}\n          className=\"w-70 sm:w-80 h-1/5 p-3 rounded-md border border-gray-300\"\n        />\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3\">\n        {filteredProducts.length === 0 ? (\n          <div className=\"col-span-full text-center text-xl font-semibold text-gray-500\">\n            No orders found.\n          </div>\n        ) : (\n          filteredProducts.map((product, index) => (\n            <ProductTile\n              key={`${product.orderId}-${index}`}\n              product={product}\n              onCancel={handleCancelOrder}\n              cancelLoading={cancelLoading}\n            />\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OrderPage;\n  "],"names":[],"mappings":"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"}},
    {"offset": {"line": 497, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}