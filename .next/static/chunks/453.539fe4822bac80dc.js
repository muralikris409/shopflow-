"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{6046:(e,t,s)=>{var a=s(6658);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},9453:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(5155),r=s(2115),l=s(3391),o=s(6046),i=s(9765),n=s(728),d=s(7370),c=s(689),u=s(6039),m=s(9398),h=s(2089);let p=()=>{console.log("Wishlist component loaded");let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),[n,d]=(0,r.useState)(null),c=(0,l.d4)(e=>{var t;return null===(t=e.userData)||void 0===t?void 0:t.token}),{toast:u}=(0,m.dj)(),p=async()=>{try{let e=await (0,i.UI)(c);t(e)}catch(e){d("Failed to load wishlist. Please try again later."),u({variant:"destructive",title:"Error",description:"Failed to load wishlist. Please try again later."})}finally{o(!1)}};(0,r.useEffect)(()=>{if(!c){o(!1);return}p()},[c,u]);let f=(0,r.useCallback)(async e=>{if(c)try{await (0,i.lx)(e,c),p(),u({title:"Success",description:"Product removed from wishlist successfully."})}catch(e){console.log(e),u({variant:"destructive",title:"Error",description:"Failed to remove product from wishlist. Please try again later."})}},[c,u]),g=(0,r.useMemo)(()=>s?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.a,{})}):n?(0,a.jsx)("p",{className:"text-center text-red-500",children:n}):e.length?(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:e.map(e=>{let{product:t}=e;return(0,a.jsx)(x,{product:t,onRemoveProduct:f},t.productId)})}):(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Your wishlist is empty."}),[s,n,e,f]);return(0,a.jsx)("section",{className:"w-full min-h-screen mx-auto p-4 bg-white rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsx)("h2",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Your Wishlist"}),g]})})},x=r.memo(e=>{let{product:t,onRemoveProduct:s}=e,r=(0,o.useRouter)();return(0,a.jsxs)(n.Zp,{className:"overflow-hidden hover:scale-105 transition-transform bg-white shadow-xl rounded-lg",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{className:"h-48 w-full object-cover rounded-t-lg",src:t.image||"/_assets/image.png",alt:t.name,loading:"lazy"}),(0,a.jsx)(d.$,{variant:"ghost",className:"absolute top-2 right-2 bg-white p-2 rounded-full shadow-md hover:bg-gray-100",onClick:()=>s(t.id),children:(0,a.jsx)(c.A,{className:"h-5 w-5 text-gray-600"})})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)(n.ZB,{className:"cursor-pointer text-lg font-semibold hover:text-blue-600",onClick:()=>r.push("/product/".concat(t.id)),children:t.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Brand: ",t.brand]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 truncate",children:t.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500 line-through",children:["$",t.actualPrice]}),(0,a.jsxs)("p",{className:"text-lg text-orange-500 font-semibold",children:["$",t.offerPrice]}),(0,a.jsxs)("p",{className:"text-sm text-green-500",children:["(",t.discountPercentage,"% off)"]})]}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-yellow-500"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 ml-1",children:[t.rating," / 5"]})]})]})]})})},2089:(e,t,s)=>{s.d(t,{a:()=>r});var a=s(5155);s(2115);let r=()=>(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-200",children:(0,a.jsxs)("div",{className:"relative  flex items-center justify-center bg-white rounded-full shadow-2xl",children:[(0,a.jsx)("div",{className:"absolute w-full h-full border-4 border-t-transparent border-blue-500 rounded-full animate-spin"}),(0,a.jsx)("img",{src:"/_assets/loader.gif",alt:"Loading...",className:"w-24 h-24 drop-shadow-lg"})]})})},9765:(e,t,s)=>{s.d(t,{UI:()=>r,lx:()=>l});var a=s(6301);async function r(e,t){console.log("wishlist");try{let e=await a.S.get("/user/wishlist/viewWishlist",{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});return console.log("wishlist",e),e.data.data.products||[]}catch(e){return console.error("Error loading wishlist:",e),[]}}async function l(e,t){try{return await a.S.post("/user/wishlist/addOrRemoveItem",{},{params:{productId:e},headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})}catch(e){throw console.error("Error adding or removing product to wishlist:",e),e}}},6301:(e,t,s)=>{s.d(t,{S:()=>l});var a=s(2651),r=s(9208);let l=a.A.create({baseURL:"https://shopflow-1-ugli.onrender.com"});l.interceptors.request.use(e=>{var t;let s=r.A.get("shopflow_session");if(!s)return e;let a=null===(t=JSON.parse(s))||void 0===t?void 0:t.token;return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e))},728:(e,t,s)=>{s.d(t,{Wu:()=>d,ZB:()=>n,Zp:()=>o,aR:()=>i});var a=s(5155),r=s(2115),l=s(7849);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});o.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});n.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},9398:(e,t,s)=>{s.d(t,{dj:()=>m,oR:()=>u});var a=s(2115);let r=0,l=new Map,o=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],d={toasts:[]};function c(e){d=i(d,e),n.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},6039:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(4057).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},689:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(4057).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);