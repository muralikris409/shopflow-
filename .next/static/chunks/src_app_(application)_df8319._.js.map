{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow-cpy/shopflowcpy/src/app/%28application%29/_service/GuestCartService.js"],"sourcesContent":["\"use client\"\n\nconst cartKey = 'shopflow';\n\nexport function loadCart() {\n  const storedCart = localStorage.getItem(cartKey);\n  return storedCart ? JSON.parse(storedCart) : [];\n}\n\nexport function saveCart(cart) {\n  localStorage.setItem(cartKey, JSON.stringify(cart));\n}\n\nexport function findProductIndex(cart, productId) {\n  return cart.findIndex(item => item.id === productId);\n}\n\nexport function addProduct(product) {\n  const cart = loadCart();\n  const productIndex = findProductIndex(cart, product.id);\n  \n  if (productIndex === -1) {\n    cart.push({ ...product, quantity: 1 });\n  } else {\n    cart[productIndex].quantity += 1;\n  }\n  \n  saveCart(cart);\n}\n\n    export function removeProduct(productId) {\n    let cart = loadCart();\n\n    cart = cart.filter(item => item.id !== productId);\n\n    saveCart(cart);\n    }\n\nexport function increaseQuantity(productId) {\n  const cart = loadCart();\n  const productIndex = findProductIndex(cart, productId);\n  \n  if (productIndex !== -1) {\n    cart[productIndex].quantity += 1;\n    saveCart(cart);\n  }\n}\n\nexport function decreaseQuantity(productId) {\n  const cart = loadCart();\n  const productIndex = findProductIndex(cart, productId);\n  \n  if (productIndex !== -1) {\n    if (cart[productIndex].quantity > 1) {\n      cart[productIndex].quantity -= 1;\n    } else {\n      removeProduct(productId);\n    }\n    saveCart(cart);\n  }\n}\n\nexport function getCart() {\n  return loadCart();\n}\n\nexport function clearCart() {\n  localStorage.removeItem(cartKey);\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA,MAAM,UAAU;AAET,SAAS;IACd,MAAM,aAAa,aAAa,OAAO,CAAC;IACxC,OAAO,aAAa,KAAK,KAAK,CAAC,cAAc,EAAE;AACjD;AAEO,SAAS,SAAS,IAAI;IAC3B,aAAa,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC;AAC/C;AAEO,SAAS,iBAAiB,IAAI,EAAE,SAAS;IAC9C,OAAO,KAAK,SAAS,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;AAC5C;AAEO,SAAS,WAAW,OAAO;IAChC,MAAM,OAAO;IACb,MAAM,eAAe,iBAAiB,MAAM,QAAQ,EAAE;IAEtD,IAAI,iBAAiB,CAAC,GAAG;QACvB,KAAK,IAAI,CAAC;YAAE,GAAG,OAAO;YAAE,UAAU;QAAE;IACtC,OAAO;QACL,IAAI,CAAC,aAAa,CAAC,QAAQ,IAAI;IACjC;IAEA,SAAS;AACX;AAEW,SAAS,cAAc,SAAS;IACvC,IAAI,OAAO;IAEX,OAAO,KAAK,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;IAEvC,SAAS;AACT;AAEG,SAAS,iBAAiB,SAAS;IACxC,MAAM,OAAO;IACb,MAAM,eAAe,iBAAiB,MAAM;IAE5C,IAAI,iBAAiB,CAAC,GAAG;QACvB,IAAI,CAAC,aAAa,CAAC,QAAQ,IAAI;QAC/B,SAAS;IACX;AACF;AAEO,SAAS,iBAAiB,SAAS;IACxC,MAAM,OAAO;IACb,MAAM,eAAe,iBAAiB,MAAM;IAE5C,IAAI,iBAAiB,CAAC,GAAG;QACvB,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,GAAG;YACnC,IAAI,CAAC,aAAa,CAAC,QAAQ,IAAI;QACjC,OAAO;YACL,cAAc;QAChB;QACA,SAAS;IACX;AACF;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,aAAa,UAAU,CAAC;AAC1B"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow-cpy/shopflowcpy/src/app/%28application%29/_service/UserCartService.js"],"sourcesContent":["\"use client\";\n\nimport { useSelector } from \"react-redux\";\nimport { axiosInstance } from \"../../api/axios\";\n\nfunction UserCartService() {\n  const token = useSelector((state) => state.session.token);\n\n  const cartKey = 'shopflow';\n\n  const getHeaders = () => ({\n    Authorization: `Bearer ${token}`,\n    'Content-Type': 'application/json',\n  });\n\n  this.loadCart = function() {\n    const storedCart = localStorage.getItem(cartKey);\n    return storedCart ? JSON.parse(storedCart) : [];\n  };\n\n  this.saveCart = function(cart) {\n    localStorage.setItem(cartKey, JSON.stringify(cart));\n  };\n\n  this.migrateCart = async function(userId) {\n    const guestCart = this.loadCart();\n    console.log(guestCart,userId);\n    if (guestCart.length > 0) {\n      for (const item of guestCart) {\n        try {\n          console.log(item);\n          const res=await this.addItemToCart(userId, item.id, item.quantity);\n          console.log(\"migrated\",res)\n          \n        } catch (error) {\n          console.error('Error migrating cart item:', error);\n        }\n      }\n      this.clearCart();\n      \n    }\n  };\n\n  this.addItemToCart = async function(userId, productId, quantity = 1) {\n    console.log(userId);\n    console.log(productId);\n    try {\n      const response = await axiosInstance.post(\n        // `/user/cart/addItemToCart?userId=${userId}&productId==${userId}4&quantity=${quantity}`, \n        `/user/cart/addItemToCart`,\n       {},\n        {\n          params:{\n            \n              userId,\n              productId,\n              quantity\n             \n          },\n          headers: getHeaders()\n        }\n      );\n      \n\n        return response.data;\n    \n    \n    } catch (error) {\n      console.log(error)\n      console.error('Error adding item to cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.viewCart = async function(userId) {\n    try {\n      const response = await axiosInstance.get('/user/cart/viewCart', {\n        params: { userId },\n        headers: getHeaders(),\n      });\n\n      if (response.status === 200) {\n        return response.data.data || [];\n      } else {\n        throw new Error(response.data.message || 'Failed to retrieve cart');\n      }\n    } catch (error) {\n      console.error('Error viewing cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.deleteFromCart = async function(userId, productId) {\n    try {\n      const response = await axiosInstance.delete('/user/cart/deleteFromCart', {\n        params: { userId, productId },\n        headers: getHeaders(),\n      });\n\n      if (response.status === 200) {\n        return response.data;\n      } else {\n        throw new Error(response.data.message || 'Failed to delete item from cart');\n      }\n    } catch (error) {\n      console.error('Error deleting item from cart:', error);\n      throw error.response ? error.response.data : new Error('Network or server error');\n    }\n  };\n\n  this.updateCartCount = async function(userId, productId, operation) {\n    try {\n      const response = await axiosInstance.put('/user/cart/cartCount', {}, {\n        params: { userId, productId, operation },\n        headers: getHeaders(),\n      });\n      console.log(response.status)\n      if (response.status === 200) {\n        return response.data;\n      } else {\n        throw new Error(response.data || 'Failed to update cart count');\n      }\n    } catch (error) {\n      console.error('Error updating cart count:', error);\n      throw error;\n    }\n  };\n\n  this.clearCart = function() {\n    localStorage.removeItem(cartKey);\n  };\n}\n\nexport default UserCartService;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow-cpy/shopflowcpy/src/app/%28application%29/_service/OrderService.js"],"sourcesContent":["import {axiosInstance} from '../../api/axios';\n\nexport const createOrder = async (userId, items) => {\n  try {\n    const response = await axiosInstance.post('/user/order/createOrder', { userId, items });\n    return response.data;\n  } catch (error) {\n    console.error('Error creating order:', error);\n    throw new Error(error?.response?.data?.message || 'Error creating order.');\n  }\n};\n\nexport const verifyPaymentAndUpdateOrder = async (orderId,razorpayId, paymentId, paymentSignature) => {\n    console.log(\"order_id:\",orderId);\n    console.log(\"razorpayId:\",razorpayId);\n    console.log(\"paymentId:\",paymentId);\n    console.log(\"siign:\",paymentSignature);\n  try {\n    const response = await axiosInstance.post('/user/order/verify', {}\n    ,\n    {\n        params:{\n            orderId,\n            razorpayId,\n            paymentId,\n            paymentSignature,\n        }\n    }\n    \n);\n    return response.data;\n  } catch (error) {\n    console.error('Error verifying payment:', error);\n    throw new Error(error?.response?.data?.message || 'Error verifying payment.');\n  }\n};\n\nexport const checkOutOrder = async (orderId) => {\n    console.log(\"orderid:\",orderId)\n  try { \n    const response = await axiosInstance.post(`/user/order/checkoutOrder?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n  }\n};\nexport const getOrderByUserId = async (userId) => {\n    console.log(\"userId:\", userId);\n    try {\n      const response = await axiosInstance.get(`/user/order/getUserOrder?userId=${userId}`\n       \n      );\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching user orders:', error);\n      throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n    }\n  };\nexport const cancelOrder = async (orderId) => {\n    console.log(orderId);\n  try {\n    const response = await axiosInstance.put(`/user/order/cancelOrder?orderId=${orderId}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error cancelling order:', error);\n    throw new Error(error?.response?.data?.message || 'Error cancelling order.');\n  }\n};\nexport const getOrderById = async (orderId) => {\n  console.log(\"userId:\", orderId);\n  try {\n    const response = await axiosInstance.get(`/user/order/getOrderById?orderId=${orderId}`\n     \n    );\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    throw new Error(error?.response?.data?.message || 'Error fetching user orders.');\n  }\n};"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,MAAM,cAAc,OAAO,QAAQ;IACxC,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,2BAA2B;YAAE;YAAQ;QAAM;QACrF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AAEO,MAAM,8BAA8B,OAAO,SAAQ,YAAY,WAAW;IAC7E,QAAQ,GAAG,CAAC,aAAY;IACxB,QAAQ,GAAG,CAAC,eAAc;IAC1B,QAAQ,GAAG,CAAC,cAAa;IACzB,QAAQ,GAAG,CAAC,UAAS;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAEjE;YACI,QAAO;gBACH;gBACA;gBACA;gBACA;YACJ;QACJ;QAGA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AAEO,MAAM,gBAAgB,OAAO;IAChC,QAAQ,GAAG,CAAC,YAAW;IACzB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,IAAI,CAAC,CAAC,kCAAkC,EAAE,SAAS;QACxF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACO,MAAM,mBAAmB,OAAO;IACnC,QAAQ,GAAG,CAAC,WAAW;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,QAAQ;QAGpF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACK,MAAM,cAAc,OAAO;IAC9B,QAAQ,GAAG,CAAC;IACd,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,SAAS;QACrF,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF;AACO,MAAM,eAAe,OAAO;IACjC,QAAQ,GAAG,CAAC,WAAW;IACvB,IAAI;QACF,MAAM,WAAW,MAAM,6HAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,CAAC,iCAAiC,EAAE,SAAS;QAGtF,QAAQ,GAAG,CAAC,SAAS,IAAI;QACzB,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,OAAO,UAAU,MAAM,WAAW;IACpD;AACF"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow-cpy/shopflowcpy/src/app/%28application%29/cart/Cart.js"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  decreaseQuantity as guestDecreaseQuantity,\n  getCart as guestGetCart,\n  increaseQuantity as guestIncreaseQuantity,\n  removeProduct as guestRemoveProduct,\n} from '../_service/GuestCartService';\nimport UserCartService from '../_service/UserCartService';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouter } from 'next/navigation';\nimport { createOrder } from '../_service/OrderService';\nimport { setProductData } from '../../_lib/utilReducer';\nimport { setHistory } from '../../_lib/utilReducer';\nconst Cart = () => {\n  const [products, setProducts] = useState([]);\n  const [totalBill, setTotalBill] = useState(0);\n  const [error, setError] = useState(null);\n  const [loadingCheckout, setLoadingCheckout] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const dispatch = useDispatch();\n  const userCartService = new UserCartService();\n  const isLoggedIn = useSelector((state) => state.session.user);\n  const router = useRouter();\n\n  useEffect(() => {\n    const loadCart = async () => {\n      setLoading(true);\n      try {\n        if (isLoggedIn) {\n          const userCart = await userCartService.viewCart(isLoggedIn.id);\n          setProducts(userCart.items);\n          setTotalBill(userCart.totalAmount);\n        } else {\n          const guestCart = typeof window !== 'undefined' ? guestGetCart() : [];\n          setProducts(guestCart);\n        }\n      } catch (err) {\n        setError('Failed to load cart. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadCart();\n  }, [isLoggedIn]);\n\n  const handleIncreaseQuantity = async (productId, setTileLoading) => {\n    try {\n      setTileLoading(true);\n      if (isLoggedIn) {\n        await userCartService.updateCartCount(isLoggedIn.id, productId, 'increase');\n        const userCart = await userCartService.viewCart(isLoggedIn.id);\n        setProducts(userCart.items);\n        setTotalBill(userCart.totalAmount);\n      } else {\n        guestIncreaseQuantity(productId);\n        setProducts(guestGetCart());\n      }\n    } catch (err) {\n      setError('Failed to update item quantity. Please try again later.');\n    } finally {\n      setTileLoading(false);\n    }\n  };\n\n  const handleDecreaseQuantity = async (productId, setTileLoading) => {\n    try {\n      setTileLoading(true);\n      if (isLoggedIn) {\n        await userCartService.updateCartCount(isLoggedIn.id, productId, 'decrease');\n        const userCart = await userCartService.viewCart(isLoggedIn.id);\n        setProducts(userCart.items);\n        setTotalBill(userCart.totalAmount);\n      } else {\n        guestDecreaseQuantity(productId);\n        setProducts(guestGetCart());\n      }\n    } catch (err) {\n      setError('Failed to update item quantity. Please try again later.');\n    } finally {\n      setTileLoading(false);\n    }\n  };\n\n  const handleRemoveProduct = async (productId, setTileLoading) => {\n    try {\n      setTileLoading(true);\n      if (isLoggedIn) {\n        await userCartService.deleteFromCart(isLoggedIn.id, productId);\n        const userCart = await userCartService.viewCart(isLoggedIn.id);\n        setProducts(userCart.items);\n        setTotalBill(userCart.totalAmount);\n      } else {\n        guestRemoveProduct(productId);\n        setProducts(guestGetCart());\n      }\n    } catch (err) {\n      setError('Failed to remove product from cart. Please try again later.');\n    } finally {\n      setTileLoading(false);\n    }\n  };\n\n  const handleCheckout = async () => {\n    setLoadingCheckout(true);\n    try {\n      const items = products?.map((product) => ({\n        productId: product.productId,\n        quantity: product.quantity,\n      }));\n      const {order } = await createOrder(isLoggedIn.id, items);\n      console.log(order)\n      const data = {\n        orders: order\n      };\n      dispatch(setProductData({orders:{...data}}))\n      router.push(`/checkout`);\n    } catch (err) {\n      console.error(err);\n      setError('Failed to proceed with checkout. Please try again later.');\n    } finally {\n      setLoadingCheckout(false);\n    }\n  };\n   \n    const handleNavigation=(productId,productName)=>{\n      \n    dispatch(setProductData({id:productId}));\n    router.push(`/product/${productName}`);\n  \n    }\n      const calculateBill = () => {\n        const total = products.reduce((acc, product) => acc + product?.offerPrice*product?.quantity, 0);\n        console.log(\"bill\", total);\n        return total;\n      };\n      \n    \n    console.log(products)\n  return (\n    <div className=\"bg-gray-100 min-h-screen\">\n      <div className=\"max-w-7xl mx-auto py-8 px-4 lg:px-6\">\n        <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">Shopping Cart</h1>\n        {loading ? (\n          <p className=\"text-center text-gray-500\">Loading...</p>\n        ) : products.length === 0 ? (\n          <p className=\"text-center text-gray-600\">Your cart is empty</p>\n        ) : (\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            <div className=\"lg:col-span-2 bg-white rounded shadow-md p-4\">\n              <ul className=\"divide-y divide-gray-200\">\n                {products.map((product, index) => (\n                  <CartTile\n                    key={index}\n                    handleNavigation={handleNavigation}\n                    product={isLoggedIn ? product.product : product}\n                    onIncreaseQuantity={handleIncreaseQuantity}\n                    onDecreaseQuantity={handleDecreaseQuantity}\n                    onRemoveProduct={handleRemoveProduct}\n                    quantity={product?.quantity}\n                  />\n                ))}\n              </ul>\n            </div>\n            <div className=\"bg-white rounded shadow-md p-4 sticky top-16\">\n              <h2 className=\"text-lg font-semibold text-gray-800 mb-4\">Price Details</h2>\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <p>Price</p>\n                  <p>${isLoggedIn ? totalBill?.toFixed(2) : calculateBill()}</p>\n                  </div>\n                <div className=\"flex justify-between text-green-600\">\n                  <p>Discount</p>\n                  <p>- $0.00</p>\n                </div>\n                <div className=\"flex justify-between font-semibold\">\n                  <p>Total Amount</p>\n                  <p>${isLoggedIn ? totalBill?.toFixed(2) : calculateBill()}</p>\n                </div>\n              </div>\n              <button\n                onClick={isLoggedIn?handleCheckout:()=>{\n                  \n                  dispatch(setHistory({route:`/cart`}));\n                  router.push(\"/auth\");\n                \n                }}\n                className={`w-full mt-4 py-2 rounded text-white ${\n                  loadingCheckout ? 'bg-gray-500' : 'bg-gray-800 hover:bg-gray-900'\n                }`}\n                disabled={products.length === 0 || loadingCheckout}\n              >\n                {loadingCheckout ? 'Processing...' : 'Checkout'}\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n\nfunction CartTile({ handleNavigation,product, onIncreaseQuantity, onDecreaseQuantity, onRemoveProduct, quantity }) {\n  const [tileLoading, setTileLoading] = useState(false);\n\n  return (\n    <li  className={`flex py-4 m-2 ${tileLoading ? 'border-2 border-double border-x-orange-500 animate-pulse ' : ''}`}>\n      <img className=\"w-16 h-16 rounded object-cover\" src={product?.image} alt={product?.name} />\n      <div className=\"ml-4 flex-1\">\n        <h3 onClick={()=>handleNavigation(product?.id,product?.name)} className=\"text-gray-800 font-semibold\">{product?.name}</h3>\n        <p className=\"text-gray-600 text-sm\">\n          ${product?.offerPrice?.toFixed(2)}{' '}\n          <span className=\"line-through text-gray-400\">${product?.actualPrice?.toFixed(2)}</span>\n        </p>\n        <p className=\"text-gray-600 text-sm mt-1\">{product?.description}</p>\n        <div className=\"flex items-center mt-2\">\n          <button\n            className=\"px-3 py-1 bg-gray-200 text-gray-800 rounded-l hover:bg-gray-300\"\n            onClick={() => onDecreaseQuantity(product?.id, setTileLoading)}\n            disabled={tileLoading}\n          >\n            -\n          </button>\n          <span className=\"px-4 py-1 bg-gray-100\">{quantity}</span>\n          <button\n            className=\"px-3 py-1 bg-gray-200 text-gray-800 rounded-r hover:bg-gray-300\"\n            onClick={() => onIncreaseQuantity(product?.id, setTileLoading)}\n            disabled={tileLoading}\n          >\n            +\n          </button>\n        </div>\n      </div>\n      <button\n        className=\"ml-auto text-red-500 hover:text-red-600\"\n        onClick={() => onRemoveProduct(product?.id, setTileLoading)}\n        disabled={tileLoading}\n      >\n        Remove\n      </button>\n    </li>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 794, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 800, "column": 0}, "map": {"version":3,"sources":["file:///home/murali/Documents/Cloning%20task/shopflow-cpy/shopflowcpy/src/app/%28application%29/cart/page.js"],"sourcesContent":["\"use client\"\nimport React from 'react'\nimport Cart from './Cart'\nexport default function page() {\n  return (\n    <div>\n      <Cart/>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;;AAGe,SAAS;IACtB,qBACE,6LAAC;kBACC,cAAA,6LAAC,gJAAA,CAAA,UAAI;;;;;;;;;;AAGX"}},
    {"offset": {"line": 826, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}