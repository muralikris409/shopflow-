(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6942:(e,s,t)=>{Promise.resolve().then(t.bind(t,9453))},6046:(e,s,t)=>{"use strict";var a=t(6658);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},9453:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(5155),r=t(2115),l=t(9765),o=t(3391);t(8173);var i=t(2895),c=t(6046);let n=()=>{let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(null),c=(0,o.d4)(e=>{var s;return null===(s=e.session.user)||void 0===s?void 0:s.id}),n=(0,o.d4)(e=>e.session.token);(0,r.useEffect)(()=>{(async()=>{try{if(c){let e=await (0,l.UI)(c,n);console.log("wishlist:",e),s(e)}}catch(e){i("Failed to load wishlist. Please try again later.")}})()},[c,n]);let m=async t=>{console.log(e);try{c&&(s(e=>e.filter(e=>e.productId!==t)),await (0,l.lx)(c,t,n))}catch(e){i("Failed to remove product from wishlist. Please try again later."),console.log(e)}};return(0,a.jsx)("section",{className:"h-1/3 bg-gray-100 py-12 sm:py-16 lg:py-20",children:(0,a.jsxs)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:e.length>0?(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Your Wishlist"}):(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Your Wishlist is empty"})}),t&&(0,a.jsx)("div",{className:"text-center text-red-500 mt-4",children:t}),(0,a.jsx)("div",{className:"mx-auto mt-8 max-w-2xl md:mt-12",children:(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"px-4 py-6 sm:px-8 sm:py-10",children:(0,a.jsx)("div",{className:"flow-root",children:(0,a.jsx)("ul",{className:"-my-8",children:e.map((e,s)=>(0,a.jsx)(d,{product:e.product,onRemoveProduct:m},s))})})})})})]})})};function d(e){let{product:s,onRemoveProduct:t}=e,r=(0,c.useRouter)(),l=(0,o.wA)();return(0,a.jsxs)("li",{className:"flex flex-col space-y-3 py-6 text-left sm:flex-row sm:space-x-5 sm:space-y-0",children:[(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)("img",{className:"h-24 w-24 max-w-full rounded-lg object-cover",src:s.image||"/_assets/image.png",alt:s.name})}),(0,a.jsxs)("div",{className:"relative flex flex-1 flex-col justify-between",children:[(0,a.jsx)("div",{className:"sm:col-gap-5 sm:grid sm:grid-cols-2",children:(0,a.jsxs)("div",{onClick:()=>{l((0,i.Sd)({id:s.id})),r.push("/product/".concat(s.name))},className:"pr-8 sm:pr-5",children:[(0,a.jsx)("p",{className:"text-base font-semibold text-gray-900",children:s.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Brand: ",s.brand]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500 line-through",children:["$",s.actualPrice]}),(0,a.jsxs)("p",{className:"text-sm text-orange-500",children:["$",s.offerPrice]}),(0,a.jsxs)("p",{className:"text-sm text-green-500",children:["(",s.discountPercentage,"% off)"]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Rating: ",s.rating," / 5"]})]})}),(0,a.jsx)("div",{className:"absolute top-0 right-0 flex sm:bottom-0 sm:top-auto",children:(0,a.jsx)("button",{onClick:()=>t(s.id),type:"button",className:"flex rounded p-2 text-center text-gray-500 transition-all duration-200 ease-in-out focus:shadow hover:text-gray-900",children:(0,a.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]})]})}},2895:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>o,Dh:()=>l,Sd:()=>r});let a=(0,t(8943).Z0)({name:"props",initialState:{product:null,history:null},reducers:{setProductData(e,s){console.log(s),e.product=s.payload,console.log(s.payload)},setHistory(e,s){e.history=s.payload,console.log(e.history)}}}),{setProductData:r,setHistory:l}=a.actions,o=a.reducer},9765:(e,s,t)=>{"use strict";t.d(s,{UI:()=>r,lx:()=>l});var a=t(6301);async function r(e,s){try{return(await a.S.get("/user/wishlist/viewWishlist",{params:{userId:e},headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}})).data.data.products||[]}catch(e){return console.error("Error loading wishlist:",e),[]}}async function l(e,s,t){try{return await a.S.post("/user/wishlist/addOrRemoveItem",{},{params:{userId:e,productId:s},headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})}catch(e){throw console.error("Error adding or removing product to wishlist:",e),e}}},6301:(e,s,t)=>{"use strict";t.d(s,{S:()=>a});let a=t(2651).A.create({baseURL:"http://192.168.0.114:5000"})}},e=>{var s=s=>e(e.s=s);e.O(0,[651,391,943,173,441,517,358],()=>s(6942)),_N_E=e.O()}]);